define("lib/core/chaos/zepto",function(require,t,e){var n=require("lib/core/zepto/zepto");require("lib/core/zepto/event"),require("lib/core/zepto/touch"),require("lib/core/zepto/ajax"),require("lib/core/extra/zepto/zepto"),require("lib/core/extra/zepto/prefixfree"),require("lib/core/extra/zepto/transform"),require("lib/core/extra/zepto/transit"),e.exports=n}),define("mods/view/touchPad",function(require,t,e){var n=(require("lib"),require("lib/mvc/view")),i=require("mods/model/touchPad"),r=require("mods/channel/socket"),o=n.extend({defaults:{node:null},build:function(){this.model=i,this.startAlpha=0,this.curAlpha=0,this.offsetAlpha=0},setEvents:function(t){this.delegate(t);var e=this.proxy(),n=this.role("root"),i=this.model;n.get(0)?(window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",e("orientation")),i.on("change",e("sync"))):r.on("touchpad:sync",e("onSync")),i.on("change:lockAlpha",e("computeOffsetAlpha")),n.on("touchstart",e("onTouchStart")),n.on("touchmove",e("onTouchMove")),n.on("touchend",e("onTouchEnd")),n.on("gesturestart",e("onGestureStart")),n.on("gesturechange",e("onGestureChange")),n.on("gestureend",e("onGestureEnd")),n.on("tap",e("triggerTap"))},preventDefault:function(t){t.preventDefault&&t.preventDefault()},onTouchStart:function(t){this.endingAction="",this.preventDefault(t),this.checkAlphaLock(t),t.touches.length>=2?(this.startX0=t.touches[0].pageX,this.startX1=t.touches[1].pageX,this.startY0=t.touches[0].pageY,this.startY1=t.touches[1].pageY):1===t.touches.length&&r.trigger("touchpad:event",{type:"touchstart",x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchMove:function(t){this.preventDefault(t),t.touches.length>=2?(this.moveX0=t.touches[0].pageX,this.moveX1=t.touches[1].pageX,this.moveY0=t.touches[0].pageY,this.moveY1=t.touches[1].pageY):1===t.touches.length&&r.trigger("touchpad:event",{type:"touchmove",x:t.touches[0].pageX,y:t.touches[0].pageY})},onTouchEnd:function(t){this.preventDefault(t),this.checkAlphaLock(t),this.checkPushPull(t),this.endingAction||r.trigger("touchpad:event",{type:"touchend"})},onGestureStart:function(t){this.preventDefault(t),t=t.originalEvent||t},onGestureChange:function(t){this.preventDefault(t),t=t.originalEvent||t},onGestureEnd:function(t){this.preventDefault(t),t=t.originalEvent||t,this.checkZoomOut(t)},checkPushPull:function(t){if(null!==this.startX0&&null!==this.startX1&&null!==this.startY0&&null!==this.startY1&&t.touches.length<=1){var e=this.moveX0-this.startX0,n=this.moveY0-this.startY0,i=this.moveX1-this.startX1,o=this.moveY1-this.startY1;n>100&&o>100&&e<Math.abs(n/2)&&e>-Math.abs(n/2)&&i<Math.abs(o/2)&&i>-Math.abs(o/2)?(r.trigger("touchpad:event",{type:"pull"}),this.endingAction="pull"):-100>n&&-100>o&&e<Math.abs(n/2)&&e>-Math.abs(n/2)&&i<Math.abs(o/2)&&i>-Math.abs(o/2)&&(r.trigger("touchpad:event",{type:"push"}),this.endingAction="push"),this.startX0=null,this.startX1=null,this.startY0=null,this.startY1=null}},computeOffsetAlpha:function(){var t=this.model,e=0;t.get("lockAlpha")?this.startAlpha=this.curAlpha:(e=this.curAlpha-this.startAlpha,e=e>-180?e:360+e,e=180>e?e:e-360,this.offsetAlpha=e+this.offsetAlpha)},checkAlphaLock:function(t){var e=this.model;"touchstart"===t.type&&3===t.touches.length?e.set("lockAlpha",!0):e.set("lockAlpha",!1)},orientation:function(t){var e=this.model,n=t.alpha,i={beta:t.beta,gamma:t.gamma};this.curAlpha=n,e.get("lockAlpha")||(n-=this.offsetAlpha,n=n>0?n:360+n,n=360>n?n:n-360,i.alpha=n),this.model.set(i)},checkZoomOut:function(t){t.scale<.5?(r.trigger("touchpad:event",{type:"pinch-out"}),this.endingAction="pinch-out"):t.scale>2&&(r.trigger("touchpad:event",{type:"pinch-in"}),this.endingAction="pinch-in")},triggerTap:function(){r.trigger("touchpad:event",{type:"tap"}),this.endingAction="tap"},sync:function(){var t=this.model.get();r.trigger("touchpad:sync",t)},onSync:function(t){t=t||{},this.model.set(t)}});e.exports=o}),define("lib/core/zepto/zepto",function(require,t,e){var n=function(){function t(t){return null==t?String(t):U[G.call(t)]||"object"}function e(e){return"function"==t(e)}function n(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function r(e){return"object"==t(e)}function o(t){return r(t)&&!n(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){return"number"==typeof t.length}function a(t){return z.call(t,function(t){return null!=t})}function u(t){return t.length>0?T.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in _?_[t]:_[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||N[c(t)]?e:e+"px"}function h(t){var e,n;return M[t]||(e=C.createElement(t),C.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),M[t]=n),M[t]}function p(t){return"children"in t?S.call(t.children):T.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function d(t,e,n){for(E in e)n&&(o(e[E])||W(e[E]))?(o(e[E])&&!o(t[E])&&(t[E]={}),W(e[E])&&!W(t[E])&&(t[E]=[]),d(t[E],e[E],n)):e[E]!==w&&(t[E]=e[E])}function g(t,e){return null==e?T(t):T(t).filter(e)}function v(t,n,i,r){return e(n)?n.call(t,i,r):n}function m(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className,i=n&&n.baseVal!==w;return e===w?i?n.baseVal:n:(i?n.baseVal=e:t.className=e,void 0)}function b(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?T.parseJSON(t):t:e):t}catch(n){return t}}function x(t,e){e(t);for(var n in t.childNodes)x(t.childNodes[n],e)}var w,E,T,P,j,O,A=[],S=A.slice,z=A.filter,C=window.document,M={},_={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,D=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,$=/^(?:body|html)$/i,X=/([A-Z])/g,F=["val","css","html","text","data","width","height","offset"],Y=["after","prepend","before","append"],I=C.createElement("table"),R=C.createElement("tr"),q={tr:C.createElement("tbody"),tbody:I,thead:I,tfoot:I,td:R,th:R,"*":C.createElement("div")},Z=/complete|loaded|interactive/,H=/^[\w-]*$/,U={},G=U.toString,V={},B=C.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},W=Array.isArray||function(t){return t instanceof Array};return V.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,o=!r;return o&&(r=B).appendChild(t),i=~V.qsa(r,e).indexOf(t),o&&B.removeChild(t),i},j=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},O=function(t){return z.call(t,function(e,n){return t.indexOf(e)==n})},V.fragment=function(t,e,n){var i,r,s;return D.test(t)&&(i=T(C.createElement(RegExp.$1))),i||(t.replace&&(t=t.replace(L,"<$1></$2>")),e===w&&(e=k.test(t)&&RegExp.$1),e in q||(e="*"),s=q[e],s.innerHTML=""+t,i=T.each(S.call(s.childNodes),function(){s.removeChild(this)})),o(n)&&(r=T(i),T.each(n,function(t,e){F.indexOf(t)>-1?r[t](e):r.attr(t,e)})),i},V.Z=function(t,e){return t=t||[],t.__proto__=T.fn,t.selector=e||"",t},V.isZ=function(t){return t instanceof V.Z},V.init=function(t,n){var i;if(!t)return V.Z();if("string"==typeof t)if(t=t.trim(),"<"==t[0]&&k.test(t))i=V.fragment(t,RegExp.$1,n),t=null;else{if(n!==w)return T(n).find(t);i=V.qsa(C,t)}else{if(e(t))return T(C).ready(t);if(V.isZ(t))return t;if(W(t))i=a(t);else if(r(t))i=[t],t=null;else if(k.test(t))i=V.fragment(t.trim(),RegExp.$1,n),t=null;else{if(n!==w)return T(n).find(t);i=V.qsa(C,t)}}return V.Z(i,t)},T=function(t,e){return V.init(t,e)},T.extend=function(t){var e,n=S.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){d(t,n,e)}),t},V.qsa=function(t,e){var n,r="#"==e[0],o=!r&&"."==e[0],s=r||o?e.slice(1):e,a=H.test(s);return i(t)&&a&&r?(n=t.getElementById(s))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:S.call(a&&!r?o?t.getElementsByClassName(s):t.getElementsByTagName(e):t.querySelectorAll(e))},T.contains=function(t,e){return t!==e&&t.contains(e)},T.type=t,T.isFunction=e,T.isWindow=n,T.isArray=W,T.isPlainObject=o,T.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},T.inArray=function(t,e,n){return A.indexOf.call(e,t,n)},T.camelCase=j,T.trim=function(t){return null==t?"":String.prototype.trim.call(t)},T.uuid=0,T.support={},T.expr={},T.map=function(t,e){var n,i,r,o=[];if(s(t))for(i=0;i<t.length;i++)n=e(t[i],i),null!=n&&o.push(n);else for(r in t)n=e(t[r],r),null!=n&&o.push(n);return u(o)},T.each=function(t,e){var n,i;if(s(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},T.grep=function(t,e){return z.call(t,e)},window.JSON&&(T.parseJSON=JSON.parse),T.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){U["[object "+e+"]"]=e.toLowerCase()}),T.fn={forEach:A.forEach,reduce:A.reduce,push:A.push,sort:A.sort,indexOf:A.indexOf,concat:A.concat,map:function(t){return T(T.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return T(S.apply(this,arguments))},ready:function(t){return Z.test(C.readyState)&&C.body?t(T):C.addEventListener("DOMContentLoaded",function(){t(T)},!1),this},get:function(t){return t===w?S.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return A.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return e(t)?this.not(this.not(t)):T(z.call(this,function(e){return V.matches(e,t)}))},add:function(t,e){return T(O(this.concat(T(t,e))))},is:function(t){return this.length>0&&V.matches(this[0],t)},not:function(t){var n=[];if(e(t)&&t.call!==w)this.each(function(e){t.call(this,e)||n.push(this)});else{var i="string"==typeof t?this.filter(t):s(t)&&e(t.item)?S.call(t):T(t);this.forEach(function(t){i.indexOf(t)<0&&n.push(t)})}return T(n)},has:function(t){return this.filter(function(){return r(t)?T.contains(this,t):T(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!r(t)?t:T(t)},last:function(){var t=this[this.length-1];return t&&!r(t)?t:T(t)},find:function(t){var e,n=this;return e="object"==typeof t?T(t).filter(function(){var t=this;return A.some.call(n,function(e){return T.contains(e,t)})}):1==this.length?T(V.qsa(this[0],t)):this.map(function(){return V.qsa(this,t)})},closest:function(t,e){var n=this[0],r=!1;for("object"==typeof t&&(r=T(t));n&&!(r?r.indexOf(n)>=0:V.matches(n,t));)n=n!==e&&!i(n)&&n.parentNode;return T(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=T.map(n,function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return g(e,t)},parent:function(t){return g(O(this.pluck("parentNode")),t)},children:function(t){return g(this.map(function(){return p(this)}),t)},contents:function(){return this.map(function(){return S.call(this.childNodes)})},siblings:function(t){return g(this.map(function(t,e){return z.call(p(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return T.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var n=e(t);if(this[0]&&!n)var i=T(t).get(0),r=i.parentNode||this.length>1;return this.each(function(e){T(this).wrapAll(n?t.call(this,e):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){T(this[0]).before(t=T(t));for(var e;(e=t.children()).length;)t=e.first();T(t).append(this)}return this},wrapInner:function(t){var n=e(t);return this.each(function(e){var i=T(this),r=i.contents(),o=n?t.call(this,e):t;r.length?r.wrapAll(o):i.append(o)})},unwrap:function(){return this.parent().each(function(){T(this).replaceWith(T(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=T(this);(t===w?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(t){return T(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return T(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var n=this.innerHTML;T(this).empty().append(v(this,t,e,n))})},text:function(t){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t===w?"":""+t})},attr:function(t,e){var n;return"string"==typeof t&&e===w?0==this.length||1!==this[0].nodeType?w:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(t))&&t in this[0]?this[0][t]:n:this.each(function(n){if(1===this.nodeType)if(r(t))for(E in t)m(this,E,t[E]);else m(this,t,v(this,e,n,this.getAttribute(t)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&m(this,t)})},prop:function(t,e){return t=J[t]||t,e===w?this[0]&&this[0][t]:this.each(function(n){this[t]=v(this,e,n,this[t])})},data:function(t,e){var n=this.attr("data-"+t.replace(X,"-$1").toLowerCase(),e);return null!==n?b(n):w},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?T(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=v(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var n=T(this),i=v(this,t,e,n.offset()),r=n.offsetParent().offset(),o={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,n){if(arguments.length<2){var i=this[0],r=getComputedStyle(i,"");if(!i)return;if("string"==typeof e)return i.style[j(e)]||r.getPropertyValue(e);if(W(e)){var o={};return T.each(W(e)?e:[e],function(t,e){o[e]=i.style[j(e)]||r.getPropertyValue(e)}),o}}var s="";if("string"==t(e))n||0===n?s=c(e)+":"+f(e,n):this.each(function(){this.style.removeProperty(c(e))});else for(E in e)e[E]||0===e[E]?s+=c(E)+":"+f(E,e[E])+";":this.each(function(){this.style.removeProperty(c(E))});return this.each(function(){this.style.cssText+=";"+s})},index:function(t){return t?this.indexOf(T(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?A.some.call(this,function(t){return this.test(y(t))},l(t)):!1},addClass:function(t){return t?this.each(function(e){P=[];var n=y(this),i=v(this,t,e,n);i.split(/\s+/g).forEach(function(t){T(this).hasClass(t)||P.push(t)},this),P.length&&y(this,n+(n?" ":"")+P.join(" "))}):this},removeClass:function(t){return this.each(function(e){return t===w?y(this,""):(P=y(this),v(this,t,e,P).split(/\s+/g).forEach(function(t){P=P.replace(l(t)," ")}),y(this,P.trim()),void 0)})},toggleClass:function(t,e){return t?this.each(function(n){var i=T(this),r=v(this,t,n,y(this));r.split(/\s+/g).forEach(function(t){(e===w?!i.hasClass(t):e)?i.addClass(t):i.removeClass(t)})}):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===w?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===w?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),i=$.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(T(t).css("margin-top"))||0,n.left-=parseFloat(T(t).css("margin-left"))||0,i.top+=parseFloat(T(e[0]).css("border-top-width"))||0,i.left+=parseFloat(T(e[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||C.body;t&&!$.test(t.nodeName)&&"static"==T(t).css("position");)t=t.offsetParent;return t})}},T.fn.detach=T.fn.remove,["width","height"].forEach(function(t){var e=t.replace(/./,function(t){return t[0].toUpperCase()});T.fn[t]=function(r){var o,s=this[0];return r===w?n(s)?s["inner"+e]:i(s)?s.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each(function(e){s=T(this),s.css(t,v(this,r,e,s[t]()))})}}),Y.forEach(function(e,n){var i=n%2;T.fn[e]=function(){var e,r,o=T.map(arguments,function(n){return e=t(n),"object"==e||"array"==e||null==n?n:V.fragment(n)}),s=this.length>1;return o.length<1?this:this.each(function(t,e){r=i?e:e.parentNode,e=0==n?e.nextSibling:1==n?e.firstChild:2==n?e:null,o.forEach(function(t){if(s)t=t.cloneNode(!0);else if(!r)return T(t).remove();x(r.insertBefore(t,e),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},T.fn[i?e+"To":"insert"+(n?"Before":"After")]=function(t){return T(t)[e](this),this}}),V.Z.prototype=T.fn,V.uniq=O,V.deserializeValue=b,T.zepto=V,T}();window.Zepto=n,void 0===window.$&&(window.$=n),e.exports=n}),define("lib/core/zepto/event",function(require){function t(t){return t._zid||(t._zid=h++)}function e(e,r,o,s){if(r=n(r),r.ns)var a=i(r.ns);return(v[t(e)]||[]).filter(function(e){return!(!e||r.e&&e.e!=r.e||r.ns&&!a.test(e.ns)||o&&t(e.fn)!==t(o)||s&&e.sel!=s)})}function n(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function i(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function r(t,e){return t.del&&!y&&t.e in b||!!e}function o(t){return x[t]||y&&b[t]||t}function s(e,i,s,a,c,h,p){var d=t(e),g=v[d]||(v[d]=[]);i.split(/\s/).forEach(function(t){if("ready"==t)return f(document).ready(s);var i=n(t);i.fn=s,i.sel=c,i.e in x&&(s=function(t){var e=t.relatedTarget;return!e||e!==this&&!f.contains(this,e)?i.fn.apply(this,arguments):void 0}),i.del=h;var d=h||s;i.proxy=function(t){if(t=u(t),!t.isImmediatePropagationStopped()){t.data=a;var n=d.apply(e,t._args==l?[t]:[t].concat(t._args));return n===!1&&(t.preventDefault(),t.stopPropagation()),n}},i.i=g.length,g.push(i),"addEventListener"in e&&e.addEventListener(o(i.e),i.proxy,r(i,p))})}function a(n,i,s,a,u){var c=t(n);(i||"").split(/\s/).forEach(function(t){e(n,t,s,a).forEach(function(t){delete v[c][t.i],"removeEventListener"in n&&n.removeEventListener(o(t.e),t.proxy,r(t,u))})})}function u(t,e){return(e||!t.isDefaultPrevented)&&(e||(e=t),f.each(P,function(n,i){var r=e[n];t[n]=function(){return this[i]=w,r&&r.apply(e,arguments)},t[i]=E}),(e.defaultPrevented!==l?e.defaultPrevented:"returnValue"in e?e.returnValue===!1:e.getPreventDefault&&e.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function c(t){var e,n={originalEvent:t};for(e in t)T.test(e)||t[e]===l||(n[e]=t[e]);return u(n,t)}var l,f=require("lib/core/zepto/zepto"),h=1,p=Array.prototype.slice,d=f.isFunction,g=function(t){return"string"==typeof t},v={},m={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},x={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",f.event={add:s,remove:a},f.proxy=function(e,n){if(d(e)){var i=function(){return e.apply(n,arguments)};return i._zid=t(e),i}if(g(n))return f.proxy(e[n],e);throw new TypeError("expected function")},f.fn.bind=function(t,e,n){return this.on(t,e,n)},f.fn.unbind=function(t,e){return this.off(t,e)},f.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var w=function(){return!0},E=function(){return!1},T=/^([A-Z]|returnValue$|layer[XY]$)/,P={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};f.fn.delegate=function(t,e,n){return this.on(e,t,n)},f.fn.undelegate=function(t,e,n){return this.off(e,t,n)},f.fn.live=function(t,e){return f(document.body).delegate(this.selector,t,e),this},f.fn.die=function(t,e){return f(document.body).undelegate(this.selector,t,e),this},f.fn.on=function(t,e,n,i,r){var o,u,h=this;return t&&!g(t)?(f.each(t,function(t,i){h.on(t,e,n,i,r)}),h):(g(e)||d(i)||i===!1||(i=n,n=e,e=l),(d(n)||n===!1)&&(i=n,n=l),i===!1&&(i=E),h.each(function(l,h){r&&(o=function(t){return a(h,t.type,i),i.apply(this,arguments)}),e&&(u=function(t){var n,r=f(t.target).closest(e,h).get(0);return r&&r!==h?(n=f.extend(c(t),{currentTarget:r,liveFired:h}),(o||i).apply(r,[n].concat(p.call(arguments,1)))):void 0}),s(h,t,i,n,e,u||o)}))},f.fn.off=function(t,e,n){var i=this;return t&&!g(t)?(f.each(t,function(t,n){i.off(t,e,n)}),i):(g(e)||d(n)||n===!1||(n=e,e=l),n===!1&&(n=E),i.each(function(){a(this,t,n,e)}))},f.fn.trigger=function(t,e){return t=g(t)||f.isPlainObject(t)?f.Event(t):u(t),t._args=e,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):f(this).triggerHandler(t,e)})},f.fn.triggerHandler=function(t,n){var i,r;return this.each(function(o,s){i=c(g(t)?f.Event(t):t),i._args=n,i.target=s,f.each(e(s,t.type||t),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){f.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){f.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),f.Event=function(t,e){g(t)||(e=t,t=e.type);var n=document.createEvent(m[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),u(n)}}),define("lib/core/zepto/touch",function(require){function t(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function e(){c=null,h.last&&(h.el.trigger("longTap"),h={})}function n(){c&&clearTimeout(c),c=null}function i(){s&&clearTimeout(s),a&&clearTimeout(a),u&&clearTimeout(u),c&&clearTimeout(c),s=a=u=c=null,h={}}function r(t){return("touch"==t.pointerType||t.pointerType==t.MSPOINTER_TYPE_TOUCH)&&t.isPrimary}function o(t,e){return t.type=="pointer"+e||t.type.toLowerCase()=="mspointer"+e}var s,a,u,c,l,f=require("lib/core/zepto/zepto"),h={},p=750;f(document).ready(function(){var d,g,v,m,y=0,b=0;"MSGesture"in window&&(l=new MSGesture,l.target=document.body),f(document).bind("MSGestureEnd",function(t){var e=t.velocityX>1?"Right":t.velocityX<-1?"Left":t.velocityY>1?"Down":t.velocityY<-1?"Up":null;e&&(h.el.trigger("swipe"),h.el.trigger("swipe"+e))}).on("touchstart MSPointerDown pointerdown",function(t){y=b=0,(!(m=o(t,"down"))||r(t))&&(v=m?t:t.touches[0],t.touches&&1===t.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),d=Date.now(),g=d-(h.last||d),h.el=f("tagName"in v.target?v.target:v.target.parentNode),s&&clearTimeout(s),h.x1=v.pageX,h.y1=v.pageY,g>0&&250>=g&&(h.isDoubleTap=!0),h.last=d,c=setTimeout(e,p),l&&m&&l.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(t){(!(m=o(t,"move"))||r(t))&&(v=m?t:t.touches[0],n(),h.x2=v.pageX,h.y2=v.pageY,y+=Math.abs(h.x1-h.x2),b+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(e){(!(m=o(e,"up"))||r(e))&&(n(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?u=setTimeout(function(){h.el.trigger("swipe"),h.el.trigger("swipe"+t(h.x1,h.x2,h.y1,h.y2)),h={}},0):"last"in h&&(30>y&&30>b?a=setTimeout(function(){var t=f.Event("tap");t.cancelTouch=i,h.el.trigger(t),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):s=setTimeout(function(){s=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),y=b=0)}).on("touchcancel MSPointerCancel pointercancel",i),f(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){f.fn[t]=function(e){return this.on(t,e)}})}),define("lib/core/zepto/ajax",function(require){function t(t,e,n){var i=v.Event(e);return v(t).trigger(i,n),!i.isDefaultPrevented()}function e(e,n,i,r){return e.global?t(n||y,i,r):void 0}function n(t){t.global&&0===v.active++&&e(t,null,"ajaxStart")}function i(t){t.global&&!--v.active&&e(t,null,"ajaxStop")}function r(t,n){var i=n.context;return n.beforeSend.call(i,t,n)===!1||e(n,i,"ajaxBeforeSend",[t,n])===!1?!1:(e(n,i,"ajaxSend",[t,n]),void 0)}function o(t,n,i,r){var o=i.context,s="success";i.success.call(o,t,s,n),r&&r.resolveWith(o,[t,s,n]),e(i,o,"ajaxSuccess",[n,i,t]),a(s,n,i)}function s(t,n,i,r,o){var s=r.context;r.error.call(s,i,n,t),o&&o.rejectWith(s,[i,n,t]),e(r,s,"ajaxError",[i,r,t||n]),a(n,i,r)}function a(t,n,r){var o=r.context;r.complete.call(o,n,t),e(r,o,"ajaxComplete",[n,r]),i(r)}function u(){}function c(t){return t&&(t=t.split(";",2)[0]),t&&(t==T?"html":t==E?"json":x.test(t)?"script":w.test(t)&&"xml")||"text"}function l(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function f(t){t.processData&&t.data&&"string"!=v.type(t.data)&&(t.data=v.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=l(t.url,t.data),t.data=void 0)}function h(t,e,n,i){return v.isFunction(e)&&(i=n,n=e,e=void 0),v.isFunction(n)||(i=n,n=void 0),{url:t,data:e,success:n,dataType:i}}function p(t,e,n,i){var r,o=v.isArray(e),s=v.isPlainObject(e);v.each(e,function(e,a){r=v.type(a),i&&(e=n?i:i+"["+(s||"object"==r||"array"==r?e:"")+"]"),!i&&o?t.add(a.name,a.value):"array"==r||!n&&"object"==r?p(t,a,n,e):t.add(e,a)})}var d,g,v=require("lib/core/zepto/zepto"),m=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,E="application/json",T="text/html",P=/^\s*$/;v.active=0,v.ajaxJSONP=function(t,e){if(!("type"in t))return v.ajax(t);var n,i,a=t.jsonpCallback,u=(v.isFunction(a)?a():a)||"jsonp"+ ++m,c=y.createElement("script"),l=window[u],f=function(t){v(c).triggerHandler("error",t||"abort")},h={abort:f};return e&&e.promise(h),v(c).on("load error",function(r,a){clearTimeout(i),v(c).off().remove(),"error"!=r.type&&n?o(n[0],h,t,e):s(null,a||"error",h,t,e),window[u]=l,n&&v.isFunction(l)&&l(n[0]),l=n=void 0}),r(h,t)===!1?(f("abort"),h):(window[u]=function(){n=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+u),y.head.appendChild(c),t.timeout>0&&(i=setTimeout(function(){f("timeout")},t.timeout)),h)},v.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:E,xml:"application/xml, text/xml",html:T,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},v.ajax=function(t){var e=v.extend({},t||{}),i=v.Deferred&&v.Deferred();for(d in v.ajaxSettings)void 0===e[d]&&(e[d]=v.ajaxSettings[d]);n(e),e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host),e.url||(e.url=window.location.toString()),f(e),e.cache===!1&&(e.url=l(e.url,"_="+Date.now()));var a=e.dataType,h=/\?.+=\?/.test(e.url);if("jsonp"==a||h)return h||(e.url=l(e.url,e.jsonp?e.jsonp+"=?":e.jsonp===!1?"":"callback=?")),v.ajaxJSONP(e,i);var p,m=e.accepts[a],y={},b=function(t,e){y[t.toLowerCase()]=[t,e]},x=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,w=e.xhr(),E=w.setRequestHeader;if(i&&i.promise(w),e.crossDomain||b("X-Requested-With","XMLHttpRequest"),b("Accept",m||"*/*"),(m=e.mimeType||m)&&(m.indexOf(",")>-1&&(m=m.split(",",2)[0]),w.overrideMimeType&&w.overrideMimeType(m)),(e.contentType||e.contentType!==!1&&e.data&&"GET"!=e.type.toUpperCase())&&b("Content-Type",e.contentType||"application/x-www-form-urlencoded"),e.headers)for(g in e.headers)b(g,e.headers[g]);if(w.setRequestHeader=b,w.onreadystatechange=function(){if(4==w.readyState){w.onreadystatechange=u,clearTimeout(p);var t,n=!1;if(w.status>=200&&w.status<300||304==w.status||0==w.status&&"file:"==x){a=a||c(e.mimeType||w.getResponseHeader("content-type")),t=w.responseText;try{"script"==a?(1,eval)(t):"xml"==a?t=w.responseXML:"json"==a&&(t=P.test(t)?null:v.parseJSON(t))}catch(r){n=r}n?s(n,"parsererror",w,e,i):o(t,w,e,i)}else s(w.statusText||null,w.status?"error":"abort",w,e,i)}},r(w,e)===!1)return w.abort(),s(null,"abort",w,e,i),w;if(e.xhrFields)for(g in e.xhrFields)w[g]=e.xhrFields[g];var T="async"in e?e.async:!0;w.open(e.type,e.url,T,e.username,e.password);for(g in y)E.apply(w,y[g]);return e.timeout>0&&(p=setTimeout(function(){w.onreadystatechange=u,w.abort(),s(null,"timeout",w,e,i)},e.timeout)),w.send(e.data?e.data:null),w},v.get=function(){return v.ajax(h.apply(null,arguments))},v.post=function(){var t=h.apply(null,arguments);return t.type="POST",v.ajax(t)},v.getJSON=function(){var t=h.apply(null,arguments);return t.dataType="json",v.ajax(t)},v.fn.load=function(t,e,n){if(!this.length)return this;var i,r=this,o=t.split(/\s/),s=h(t,e,n),a=s.success;return o.length>1&&(s.url=o[0],i=o[1]),s.success=function(t){r.html(i?v("<div>").html(t.replace(b,"")).find(i):t),a&&a.apply(r,arguments)},v.ajax(s),this};var j=encodeURIComponent;v.param=function(t,e){var n=[];return n.add=function(t,e){this.push(j(t)+"="+j(e))},p(n,t,e),n.join("&").replace(/%20/g,"+")}}),define("lib/core/extra/zepto/zepto",function(require){var t=require("lib/core/zepto/zepto"),e=window.console,n=e&&"function"==typeof e.log;t.extend(t,{noop:function(){},log:function(){n&&e.log.apply(e,arguments)},hyphenate:function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}}),t.extend(t.fn,{occurInside:function(t){return this.length&&t&&t.target?this[0]===t.target||this.has(t.target).length:void 0},hasAttr:function(t){return this[0]&&this[0].hasAttribute(t)},reflow:function(){this.size()&&this.get(0).clientLeft;return this}})}),define("lib/core/extra/zepto/prefixfree",function(require){var t=require("lib/core/zepto/zepto");require("lib/core/extra/zepto/zepto");var e,n=t.camelCase,i=t.hyphenate;!function(t){function r(t,e){-1===t.indexOf(e)&&t.push(e)}if(window.getComputedStyle){var o=window.getComputedStyle,s={prefixProperty:function(t,e){var i=s.prefix+t;return e?n(i):i}};e=s,function(){var t,e,a={},u={prefix:"",uses:0},c=[],l=o(document.documentElement,null),f=document.createElement("div").style,h=function(t){if(r(c,t),t.indexOf("-")>-1){var e=t.split("-");if("-"===t.charAt(0)){var i=e[1],o=++a[i]||1;for(a[i]=o,u.uses<o&&(u={prefix:i,uses:o});e.length>3;){e.pop();var s=e.join("-"),l=n(s);l in f&&r(c,s)}}}};if(l.length>0)for(t=0;t<l.length;t++)h(l[t]);else for(e in l)h(i(e));for(s.prefix="-"+u.prefix+"-",s.Prefix=n(s.prefix),c.sort(),s.properties=[],t=0;t<c.length&&(e=c[t],"-"===e.charAt(0));t++)if(0===e.indexOf(s.prefix)){var p=e.slice(s.prefix.length);n(p)in f||s.properties.push(p)}"Ms"!=s.Prefix||"transform"in f||"MsTransform"in f||!("msTransform"in f)||s.properties.push("transform","transform-origin"),s.properties.sort()}(),t.className+=" "+s.prefix}}(document.documentElement),function(){if(e){var i=e;t.cssProps=t.cssProps||{};var r,o,s,a;for(r=0;r<i.properties.length;r++)o=i.properties[r],s=n(o),a=i.prefixProperty(o),t.cssProps[s]=a;var u=t.fn.css,c=function(e){return e?e=e.replace(/transform/gi,t.cssProps.transform):e};t.fn.css=function(e,i){var r,o,s;if("string"==typeof e)s=n(e),t.cssProps[s]&&(e=t.cssProps[s],i=c(i));else for(r in e)s=n(r),t.cssProps[s]&&(o=t.cssProps[s],e[o]=c(e[r]),delete e[r]);
return arguments.length<2?u.apply(this,[e]):u.apply(this,[e,i])},t.getPrefix=function(){return e.prefix}}}()}),define("lib/core/extra/zepto/transform",function(require){var t=require("lib/core/zepto/zepto");t.fn.transform=function(e,n){var i={},r=t(this).css("transform")||"";if(r="none"===r?"":r,r=r.replace(/,\s+/gi,","),t.each(r.split(/\s+/gi),function(e,n){if(n){var r=n.match(/\w+/)[0],o=n.replace(r,"").replace(/[\(\)]/gi,"");o=t.trim(o),i[r]=o}}),!e)return i;if("string"==typeof e){if("undefined"===t.type(n))return i[e]||0;i[e]=n}else t.extend(i,e);return r=[],t.each(i,function(t,e){var n=t+"("+e+")";r.push(n)}),r=r.length?r.join(" "):"",t(this).css("transform",r)}}),define("lib/core/extra/zepto/transit",function(require){function t(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function e(t){return n?n+t:t.toLowerCase()}var n,i,r,o,s,a,u,c,l,f,h=require("lib/core/zepto/zepto"),p="",d={Webkit:"webkit",Moz:"",O:"o"},g=window.document,v=g.createElement("div"),m=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};h.each(d,function(t,e){return void 0!==v.style[t+"TransitionProperty"]?(p="-"+t.toLowerCase()+"-",n=e,!1):void 0}),i="transform",y[r="transition-property"]=y[o="transition-duration"]=y[a="transition-delay"]=y[s="transition-timing-function"]=y[u="animation-name"]=y[c="animation-duration"]=y[f="animation-delay"]=y[l="animation-timing-function"]="",h.fx={off:void 0===n&&void 0===v.style.transitionProperty,speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:e("TransitionEnd"),animationEnd:e("AnimationEnd")},h.fn.transit=function(t,e,n,i,r){return h.isFunction(e)&&(i=e,n=void 0,e=void 0),h.isFunction(n)&&(i=n,n=void 0),h.isPlainObject(e)&&(n=e.easing,i=e.complete,r=e.delay,e=e.duration),e&&(e=("number"==typeof e?e:h.fx.speeds[e]||h.fx.speeds._default)/1e3),r&&(r=parseFloat(r)/1e3),this.anim(t,e,n,i,r)},h.fn.anim=function(e,n,p,d,g){var v,b,x,w={},E="",T=this,P=h.fx.transitionEnd,j=!1;if(void 0===n&&(n=h.fx.speeds._default/1e3),void 0===g&&(g=0),h.fx.off&&(n=0),"string"==typeof e)w[u]=e,w[c]=n+"s",w[f]=g+"s",w[l]=p||"linear",P=h.fx.animationEnd;else{b=[];for(v in e)m.test(v)?E+=v+"("+e[v]+") ":(w[v]=e[v],b.push(t(v)));E&&(w[i]=E,b.push(i)),n>0&&"object"==typeof e&&(w[r]="*",w[o]=n+"s",w[a]=g+"s",w[s]=p||"linear")}x=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;h(t.target).unbind(P,x)}else h(this).unbind(P,x);j=!0,h(this).css(y),d&&d.call(this)},n>0&&(this.bind(P,x),setTimeout(function(){j||x.call(T)},1e3*n+25));this.size()&&this.get(0).clientLeft;return this.css(w),0>=n&&setTimeout(function(){T.each(function(){x.call(this)})},0),this},v=null}),define("lib/mvc/view",function(require,t,e){var n=require("lib"),i=require("lib/mvc/base"),r=require("lib/mvc/delegate"),o=function(){var t=this.conf,e=t.template,i=this.nodes,r=i.root;return r||(t.node&&(r=n(t.node)),r&&r.length||(n.isArray(e)&&(e=e.join("")),r=n(e)),i.root=r),r},s=i.extend({defaults:{node:"",template:"",events:{},role:{}},initialize:function(){this.nodes={},s.superclass.initialize.apply(this,arguments)},setEvents:function(t){this.delegate(t)},delegate:function(t,e,n,i){t=t||"on",e=e||this.role("root"),n=n||this.conf.events,i=i||this,r(t,e,n,i)},role:function(t,e){var i=this.nodes,r=o.call(this),s=this.conf.role||{};return e?i[t]=e=n(e):(i[t]&&(e=i[t]),"root"===t?e=r:e&&e.length||(e=s[t]?r.find(s[t]):r.find('[data-role="'+t+'"]'),i[t]=e)),e},resetRoles:function(){var t=this.nodes;n.each(t,function(e){"root"!==e&&(t[e]=null,delete t[e])})},destroy:function(){s.superclass.destroy.apply(this,arguments),this.resetRoles(),this.nodes=null}});e.exports=s}),define("mods/model/touchPad",function(require,t,e){var n=(require("lib"),require("lib/mvc/model")),i=n.extend({defaults:{lockAlpha:!1,eyeHeight:0,alpha:0,beta:0,gamma:0},events:{},build:function(){}});e.exports=new i}),define("mods/channel/socket",function(require,t,e){var n=require("lib"),i=require("lib/more/events"),r=require("mods/socket/client"),o=require("lib/kit/util/timer");r.init();var s=new i,a={},u=null;o.setInterval(function(){u&&r.set(u),u=null}),a.trigger=function(t,e){t=t||"",e=e||{},u||(u={}),u[t]=e},a.on=function(){s.on.apply(s,arguments)},a.off=function(){s.off.apply(s,arguments)},r.on("update",function(t){t=t||{},n.each(t,function(t,e){e=e||{},t&&s.trigger(t,e)})}),e.exports=a}),define("lib/mvc/base",function(require,t,e){var n=require("lib"),i=require("lib/more/class"),r=require("lib/more/events"),o=i.create({Implements:[r],defaults:{},initialize:function(t){this.setOptions(t),this.build(),this.setEvents("on")},setOptions:function(t){this.conf=this.conf||n.extend(!0,{},this.defaults),n.isPlainObject(t)||(t={}),n.extend(!0,this.conf,t)},build:n.noop,setEvents:n.noop,proxy:function(t){var e=this,i=this.bound?this.bound:this.bound={};return t=t||"proxy",n.isFunction(i[t])||(i[t]=function(){return n.isFunction(e[t])?e[t].apply(e,arguments):void 0}),i[t]},destroy:function(){this.setEvents("off"),this.off(),this.bound=null}});e.exports=o}),define("lib/mvc/delegate",function(require,t,e){e.exports=function(t,e,n,i){var r,o;e&&i&&$.isFunction(i.proxy)&&(r=i.proxy(),t="on"===t?"on":"off",o="on"===t?"delegate":"undelegate",n=$.extend({},n),$.each(n,function(n,i){var s,a,u=[];if(n=n.split(/\s+/),"string"===$.type(i))u=i.split(/\s+/).map(function(t){return r(t)});else{if(!$.isFunction(i))return;u=[i]}a=n.pop(),n.length>=1?(s=n.join(" "),$.isFunction(e[o])&&u.forEach(function(t){e[o](s,a,t)})):$.isFunction(e[t])&&u.forEach(function(n){e[t](a,n)})}))}}),define("lib/mvc/model",function(require,t,e){var n=require("lib"),i=require("lib/mvc/base"),r=require("lib/mvc/delegate"),o="__private__",s=function(t,e){if("string"===n.type(t)){var i=this,r=this.data||{};r.hasOwnProperty(o)||(Object.defineProperty(r,o,{writable:!0,enumerable:!1,configurable:!0}),r[o]={}),r.hasOwnProperty(t)||(Object.defineProperty(r,t,{set:function(e){var n=this[t];e!==n&&(this[o][t]=e,i.changed=!0,i.trigger("change:"+t,n))},get:function(){return this[o][t]},enumerable:!0,configurable:!0}),this.changed=!0),r[t]=e}},a=function(t,e){if("string"===n.type(t)){var i=this,r=this.data||{};s.call(this,t),Object.defineProperty(r,t,{get:function(){return e.call(i,this[o][t])}})}},u=function(t){delete this.data[t]},c=i.extend({defaults:{},events:{},initialize:function(){this.data={},this.changed=!1,c.superclass.initialize.apply(this,arguments)},setOptions:function(){c.superclass.setOptions.apply(this,arguments),this.set(this.conf)},setEvents:function(t){this.delegate(t)},delegate:function(t,e,n,i){t=t||"on",e=e||this,n=n||this.events,i=i||this,r(t,e,n,i)},set:function(t,e){n.isPlainObject(t)?n.each(t,s.bind(this)):"string"===n.type(t)&&s.call(this,t,e),this.changed&&(this.trigger("change"),this.changed=!1)},get:function(t){var e;return"string"===n.type(t)?(e=this.data[t],n.isPlainObject(e)?n.extend(!0,{},e):n.isArray(e)?n.extend(!0,[],e):e):"undefined"==typeof t?n.extend(!0,{},this.data):void 0},setComputed:function(t,e){"object"===n.type(t)?n.each(t,a.bind(this)):"string"===n.type(t)&&n.isFunction(e)&&a.call(this,t,e)},keys:function(){return Object.keys(this.data)},remove:function(t){u.call(this,t),this.trigger("change:"+t),this.trigger("change")},clear:function(){Object.keys(this.data).forEach(this.remove,this)},destroy:function(){this.changed=!1,c.superclass.destroy.apply(this,arguments),this.clear(),this.data=null}});e.exports=c}),define("lib/more/events",function(require,t,e){function n(){}var i=/\s+/;n.prototype.on=function(t,e,n){var r,o,s;if(!e)return this;for(r=this.__events||(this.__events={}),t=t.split(i);o=t.shift();)s=r[o]||(r[o]=[]),s.push(e,n);return this},n.prototype.off=function(t,e,n){var o,s,a,u;if(!(o=this.__events))return this;if(!(t||e||n))return delete this.__events,this;for(t=t?t.split(i):r(o);s=t.shift();)if(a=o[s])if(e||n)for(u=a.length-2;u>=0;u-=2)e&&a[u]!==e||n&&a[u+1]!==n||a.splice(u,2);else delete o[s];return this},n.prototype.trigger=function(t){var e,n,r,o,s,a,u,c=[];if(!(e=this.__events))return this;for(t=t.split(i),s=1,a=arguments.length;a>s;s++)c[s-1]=arguments[s];for(;n=t.shift();){if((r=e.all)&&(r=r.slice()),(o=e[n])&&(o=o.slice()),o)for(s=0,a=o.length;a>s;s+=2)o[s].apply(o[s+1]||this,c);if(r)for(u=[n].concat(c),s=0,a=r.length;a>s;s+=2)r[s].apply(r[s+1]||this,u)}return this},n.mixTo=function(t){t=t.prototype||t;var e=n.prototype;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};var r=Object.keys;r||(r=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),e.exports=n}),define("mods/socket/client",function(require,t,e){var n=function(){this.iourl=window.location.host};n.prototype={constructor:n,init:function(t){this.vrhd=io(this.iourl),this.set(t)},set:function(t){this.vrhd.emit("set",t)},on:function(t,e){this.vrhd.on(t,e)}},e.exports=new n}),define("lib/kit/util/timer",function(require,t,e){var n=require("lib"),i=window,r=n.getPrefix().replace(/-/gi,""),o=function(t){var e=t.charAt(0).toUpperCase()+t.substr(1),o=i[t]||i[r+e];return"function"===n.type(o)?o.bind(i):null},s=o("requestAnimationFrame"),a=o("cancelAnimationFrame")||n.noop,u={};if(s){var c=function(t,e,n){var i={},r=Date.now();return e=e||0,e=Math.max(e,0),i.step=function(){var o=Date.now();o-r>e&&(t(),"timeout"===n?l(i):r=o),i.requestId=s(i.step)},s(i.step),i},l=function(t){t.requestId&&"function"===n.type(t.step)&&(t.step=n.noop,a(t.requestId),t.requestId=0)};u.setInterval=function(t,e){return c(t,e,"interval")},u.setTimeout=function(t,e){return c(t,e,"timeout")},u.clearTimeout=l,u.clearInterval=l}u.setInterval=u.setInterval||i.setInterval.bind(i),u.clearInterval=u.clearInterval||i.clearInterval.bind(i),u.setTimeout=u.setTimeout||i.setTimeout.bind(i),u.clearTimeout=u.clearTimeout||i.clearTimeout.bind(i),e.exports=u}),define("lib/more/class",function(require,t,e){function n(t){return this instanceof n||!f(t)?void 0:r(t)}function i(t){var e,i;for(e in t)i=t[e],n.Mutators.hasOwnProperty(e)?n.Mutators[e].call(this,i):this.prototype[e]=i}function r(t){return t.extend=n.extend,t.implement=i,t}function o(){}function s(t,e,n){for(var i in e)if(e.hasOwnProperty(i)){if(n&&-1===h(n,i))continue;"prototype"!==i&&(t[i]=e[i])}}function a(t){if(p){var e=p();if(e){var n=e.uri.split(/[\/\\]/).pop();Object.defineProperties?Object.defineProperties(t,{__module:{value:e},__filename:{value:n}}):(t.__module=e,t.__filename=n)}}}e.exports=n,n.create=function(t,e){function o(){t.apply(this,arguments),this.constructor===o&&this.initialize&&this.initialize.apply(this,arguments)}return f(t)||(e=t,t=null),e||(e={}),t||(t=e.Extends||n),e.Extends=t,t!==n&&s(o,t,t.StaticsWhiteList),i.call(o,e),r(o)},n.extend=function(t){return t||(t={}),t.Extends=this,n.create(t)},n.Mutators={Extends:function(t){var e=this.prototype,n=u(t.prototype);s(n,e),n.constructor=this,this.prototype=n,this.superclass=t.prototype,a(n)},Implements:function(t){l(t)||(t=[t]);for(var e,n=this.prototype;e=t.shift();)s(n,e.prototype||e)},Statics:function(t){s(this,t)}};var u=Object.__proto__?function(t){return{__proto__:t}}:function(t){return o.prototype=t,new o},c=Object.prototype.toString,l=Array.isArray;l||(l=function(t){return"[object Array]"===c.call(t)});var f=function(t){return"[object Function]"===c.call(t)},h=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},p=e.constructor._getCompilingModule}),define("conf/page/touch",function(require){{var t=require("lib"),e=require("mods/view/touchPad");new e({node:t("#touch-pad")})}});